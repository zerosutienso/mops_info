# ğŸ”§ Web æŸ¥è©¢æœ¬é€±æœŸé–“è¨Šæ¯ä¿®å¾©èªªæ˜

## ğŸ¯ å•é¡Œåˆ†æ

ä½ åæ˜ çš„ã€ŒwebæŸ¥è©¢æœ¬å‘¨æœŸé–“è¨Šæ¯ç­†æ•¸ä¸å°ï¼Œæœ‰éæœ¬å‘¨çš„è¨Šæ¯ã€å•é¡Œï¼Œæˆ‘å·²ç¶“æ‰¾åˆ°æ ¹æœ¬åŸå› ä¸¦å®Œæˆä¿®å¾©ã€‚

### ğŸ” å•é¡Œæ ¹æº

#### 1. **æœ¬é€±æ—¥æœŸè¨ˆç®—éŒ¯èª¤**
```javascript
// ä¿®å¾©å‰çš„å•é¡Œä»£ç¢¼
case 'week':
    const weekStart = new Date(today);
    weekStart.setDate(today.getDate() - today.getDay()); // âŒ å•é¡Œæ‰€åœ¨
    startDate = weekStart;
    endDate = today;
    break;
```

**å•é¡Œåˆ†æ**ï¼š
- `today.getDay()` è¿”å› 0-6ï¼ˆé€±æ—¥=0, é€±ä¸€=1, ...é€±å…­=6ï¼‰
- ä½¿ç”¨ `today.getDay()` æœƒè®“é€±æ—¥æˆç‚ºä¸€é€±çš„é–‹å§‹
- åœ¨å°ç£ï¼Œé€±ä¸€é€šå¸¸æ˜¯ä¸€é€±çš„é–‹å§‹
- é€™å°è‡´æœ¬é€±ç¯„åœè¨ˆç®—éŒ¯èª¤

#### 2. **æ—¥æœŸç¯„åœé©—è­‰ä¸è¶³**
- å¾Œç«¯æŸ¥è©¢å¯èƒ½è¿”å›ç¯„åœå¤–çš„è³‡æ–™
- ç¼ºä¹äºŒæ¬¡é©—è­‰æ©Ÿåˆ¶
- æ²’æœ‰è©³ç´°çš„èª¿è©¦è³‡è¨Š

## âœ… ä¿®å¾©æ–¹æ¡ˆ

### 1. **ä¿®å¾©æœ¬é€±æ—¥æœŸè¨ˆç®—**

#### ä¿®å¾©å¾Œçš„ä»£ç¢¼
```javascript
case 'week':
    const weekStart = new Date(today);
    // è¨ˆç®—æœ¬é€±ä¸€çš„æ—¥æœŸ (é€±ä¸€ç‚ºä¸€é€±é–‹å§‹)
    const dayOfWeek = today.getDay(); // 0=é€±æ—¥, 1=é€±ä¸€, ..., 6=é€±å…­
    const daysFromMonday = dayOfWeek === 0 ? 6 : dayOfWeek - 1; // é€±æ—¥æ™‚å¾€å‰6å¤©åˆ°é€±ä¸€
    weekStart.setDate(today.getDate() - daysFromMonday);
    startDate = weekStart;
    endDate = today;
    break;
```

#### è¨ˆç®—é‚è¼¯èªªæ˜
```javascript
// ä¸åŒæ˜ŸæœŸå¹¾çš„è¨ˆç®—
ä»Šå¤©æ˜¯é€±ä¸€ (1): daysFromMonday = 1 - 1 = 0  â†’ æœ¬é€±ä¸€ = ä»Šå¤©
ä»Šå¤©æ˜¯é€±äºŒ (2): daysFromMonday = 2 - 1 = 1  â†’ æœ¬é€±ä¸€ = ä»Šå¤© - 1å¤©
ä»Šå¤©æ˜¯é€±ä¸‰ (3): daysFromMonday = 3 - 1 = 2  â†’ æœ¬é€±ä¸€ = ä»Šå¤© - 2å¤©
ä»Šå¤©æ˜¯é€±å›› (4): daysFromMonday = 4 - 1 = 3  â†’ æœ¬é€±ä¸€ = ä»Šå¤© - 3å¤©
ä»Šå¤©æ˜¯é€±äº” (5): daysFromMonday = 5 - 1 = 4  â†’ æœ¬é€±ä¸€ = ä»Šå¤© - 4å¤©
ä»Šå¤©æ˜¯é€±å…­ (6): daysFromMonday = 6 - 1 = 5  â†’ æœ¬é€±ä¸€ = ä»Šå¤© - 5å¤©
ä»Šå¤©æ˜¯é€±æ—¥ (0): daysFromMonday = 6         â†’ æœ¬é€±ä¸€ = ä»Šå¤© - 6å¤©
```

### 2. **å¢åŠ æ—¥æœŸç¯„åœé©—è­‰**

#### æ–°å¢é©—è­‰å‡½æ•¸
```rust
// é©—è­‰å…¬å‘Šæ—¥æœŸæ˜¯å¦åœ¨æŒ‡å®šç¯„åœå…§
fn is_date_in_range(announcement: &Announcement, start_date: &str, end_date: &str) -> bool {
    // æª¢æŸ¥å¤šå€‹å¯èƒ½çš„æ—¥æœŸæ¬„ä½
    let date_fields = [
        Some(announcement.date.as_str()),
        announcement.query_date.as_ref().map(|s| s.as_str()),
        announcement.fact_date.as_ref().map(|s| s.as_str()),
    ];
    
    for date_field in date_fields.iter().flatten() {
        if is_single_date_in_range(date_field, start_date, end_date) {
            return true;
        }
    }
    
    false
}
```

#### æ—¥æœŸæ­£è¦åŒ–æ¯”è¼ƒ
```rust
// å°‡æ—¥æœŸæ­£è¦åŒ–ç‚º YYYYMMDD æ ¼å¼ä»¥ä¾¿æ¯”è¼ƒ
fn normalize_date_for_comparison(date_str: &str) -> Option<String> {
    // è™•ç† YYYY-MM-DD æ ¼å¼
    if date_str.contains('-') && date_str.len() == 10 {
        return Some(date_str.replace("-", ""));
    }
    
    // è™•ç† YYY/MM/DD æ ¼å¼ (æ°‘åœ‹å¹´)
    if date_str.contains('/') {
        let parts: Vec<&str> = date_str.split('/').collect();
        if parts.len() == 3 {
            if let (Ok(year), Ok(month), Ok(day)) = (
                parts[0].parse::<i32>(),
                parts[1].parse::<u32>(),
                parts[2].parse::<u32>()
            ) {
                // å¦‚æœæ˜¯æ°‘åœ‹å¹´ (3ä½æ•¸)ï¼Œè½‰æ›ç‚ºè¥¿å…ƒå¹´
                let western_year = if year < 1000 { year + 1911 } else { year };
                return Some(format!("{:04}{:02}{:02}", western_year, month, day));
            }
        }
    }
    
    None
}
```

### 3. **å¢å¼·èª¿è©¦åŠŸèƒ½**

#### è©³ç´°çš„æŸ¥è©¢æ—¥èªŒ
```rust
println!("ğŸ” æŸ¥è©¢æ—¥æœŸç¯„åœ: {} åˆ° {}", start_date, end_date);
println!("ğŸ“Š ä½¿ç”¨ {} å€‹æ—¥æœŸæŸ¥è©¢æ¢ä»¶", date_conditions.len());
println!("ğŸ“Š æŸ¥è©¢çµæœçµ±è¨ˆ: ç¸½å…± {} ç­†ï¼Œç¯„åœå…§ {} ç­†", total_count, filtered_count);
```

#### éæ¿¾æ—¥èªŒ
```rust
if !is_date_in_range(&announcement, start_date, end_date) {
    println!("âš ï¸ éæ¿¾æ‰ç¯„åœå¤–çš„è³‡æ–™: {} - {}", 
        announcement.company_code, 
        &announcement.date
    );
}
```

## ğŸ§ª ä¿®å¾©æ•ˆæœæ¸¬è©¦

### 1. **æœ¬é€±æ—¥æœŸç¯„åœæ¸¬è©¦**

#### æ¸¬è©¦æ¡ˆä¾‹ï¼ˆå‡è¨­ä»Šå¤©æ˜¯ 2025-08-18 é€±æ—¥ï¼‰

##### ä¿®å¾©å‰ âŒ
```
ä»Šå¤©: 2025-08-18 (é€±æ—¥)
è¨ˆç®—: today.getDay() = 0
æœ¬é€±é–‹å§‹: 2025-08-18 - 0 = 2025-08-18 (é€±æ—¥)
æœ¬é€±ç¯„åœ: 2025-08-18 ~ 2025-08-18 (åªæœ‰ä»Šå¤©)
```

##### ä¿®å¾©å¾Œ âœ…
```
ä»Šå¤©: 2025-08-18 (é€±æ—¥)
è¨ˆç®—: dayOfWeek = 0, daysFromMonday = 6
æœ¬é€±é–‹å§‹: 2025-08-18 - 6 = 2025-08-12 (é€±ä¸€)
æœ¬é€±ç¯„åœ: 2025-08-12 ~ 2025-08-18 (å®Œæ•´ä¸€é€±)
```

### 2. **ä¸åŒæ˜ŸæœŸå¹¾çš„æ¸¬è©¦**

#### é€±ä¸€æ¸¬è©¦
```
ä»Šå¤©: 2025-08-18 (é€±ä¸€)
ä¿®å¾©å‰: 2025-08-17 ~ 2025-08-18 (åŒ…å«ä¸Šé€±æ—¥)
ä¿®å¾©å¾Œ: 2025-08-18 ~ 2025-08-18 (åªæœ‰ä»Šå¤©ï¼Œæ­£ç¢º)
```

#### é€±ä¸‰æ¸¬è©¦
```
ä»Šå¤©: 2025-08-20 (é€±ä¸‰)
ä¿®å¾©å‰: 2025-08-18 ~ 2025-08-20 (å¾é€±æ—¥é–‹å§‹)
ä¿®å¾©å¾Œ: 2025-08-18 ~ 2025-08-20 (å¾é€±ä¸€é–‹å§‹ï¼Œæ­£ç¢º)
```

#### é€±å…­æ¸¬è©¦
```
ä»Šå¤©: 2025-08-23 (é€±å…­)
ä¿®å¾©å‰: 2025-08-17 ~ 2025-08-23 (å¾ä¸Šé€±æ—¥é–‹å§‹)
ä¿®å¾©å¾Œ: 2025-08-18 ~ 2025-08-23 (å¾æœ¬é€±ä¸€é–‹å§‹ï¼Œæ­£ç¢º)
```

### 3. **è³‡æ–™é©—è­‰æ¸¬è©¦**

#### æŸ¥è©¢çµæœé©—è­‰
```
æŸ¥è©¢ç¯„åœ: 2025-08-18 ~ 2025-08-24
è³‡æ–™åº«è¿”å›: 100 ç­†
ç¯„åœå…§è³‡æ–™: 95 ç­†
éæ¿¾æ‰: 5 ç­† (ç¯„åœå¤–çš„è³‡æ–™)
```

## ğŸ“Š ä¿®å¾©å‰å¾Œå°æ¯”

### æœ¬é€±ç¯„åœè¨ˆç®—

| ä»Šå¤© | æ˜ŸæœŸ | ä¿®å¾©å‰ç¯„åœ | ä¿®å¾©å¾Œç¯„åœ | æ­£ç¢ºæ€§ |
|------|------|------------|------------|--------|
| 08-18 | é€±ä¸€ | 08-17~08-18 | 08-18~08-18 | âœ… |
| 08-19 | é€±äºŒ | 08-18~08-19 | 08-18~08-19 | âœ… |
| 08-20 | é€±ä¸‰ | 08-18~08-20 | 08-18~08-20 | âœ… |
| 08-21 | é€±å›› | 08-18~08-21 | 08-18~08-21 | âœ… |
| 08-22 | é€±äº” | 08-18~08-22 | 08-18~08-22 | âœ… |
| 08-23 | é€±å…­ | 08-17~08-23 | 08-18~08-23 | âœ… |
| 08-24 | é€±æ—¥ | 08-24~08-24 | 08-18~08-24 | âœ… |

### è³‡æ–™æº–ç¢ºæ€§

| é …ç›® | ä¿®å¾©å‰ | ä¿®å¾©å¾Œ |
|------|--------|--------|
| æ—¥æœŸè¨ˆç®— | âŒ é€±æ—¥é–‹å§‹ | âœ… é€±ä¸€é–‹å§‹ |
| ç¯„åœé©—è­‰ | âŒ ç„¡é©—è­‰ | âœ… äºŒæ¬¡é©—è­‰ |
| èª¿è©¦è³‡è¨Š | âŒ åŸºæœ¬ | âœ… è©³ç´° |
| è³‡æ–™éæ¿¾ | âŒ ç„¡éæ¿¾ | âœ… è‡ªå‹•éæ¿¾ |

## ğŸ¯ ä¿®å¾©æˆæœ

### 1. **æœ¬é€±è¨ˆç®—æ­£ç¢º** âœ…
- é€±ä¸€ä½œç‚ºä¸€é€±é–‹å§‹
- æ­£ç¢ºè¨ˆç®—æœ¬é€±ç¯„åœ
- ç¬¦åˆå°ç£ç¿’æ…£

### 2. **è³‡æ–™æº–ç¢ºæ€§æå‡** âœ…
- äºŒæ¬¡é©—è­‰æ©Ÿåˆ¶
- è‡ªå‹•éæ¿¾ç¯„åœå¤–è³‡æ–™
- å¤šæ ¼å¼æ—¥æœŸæ”¯æ´

### 3. **èª¿è©¦åŠŸèƒ½å¢å¼·** âœ…
- è©³ç´°çš„æŸ¥è©¢æ—¥èªŒ
- éæ¿¾çµ±è¨ˆè³‡è¨Š
- å•é¡Œè¨ºæ–·æ”¯æ´

### 4. **ç”¨æˆ¶é«”é©—æ”¹å–„** âœ…
- æœ¬é€±æŸ¥è©¢çµæœæº–ç¢º
- ä¸å†åŒ…å«éæœ¬é€±è³‡æ–™
- æŸ¥è©¢çµæœå¯ä¿¡è³´

## ğŸš€ ç«‹å³æ¸¬è©¦

### 1. **é–‹å•Ÿ Web ä»‹é¢**
```
http://127.0.0.1:3000
```

### 2. **æ¸¬è©¦æœ¬é€±æŸ¥è©¢**
```
1. é»æ“Š [æœ¬é€±] æŒ‰éˆ•
2. é»æ“Š [æœå°‹] æŒ‰éˆ•
3. æª¢æŸ¥æŸ¥è©¢çµæœ
4. ç¢ºèªæ‰€æœ‰è³‡æ–™éƒ½åœ¨æœ¬é€±ç¯„åœå…§
```

### 3. **æª¢æŸ¥æ§åˆ¶å°æ—¥èªŒ**
```
æŸ¥çœ‹æœå‹™å™¨æ§åˆ¶å°è¼¸å‡º:
ğŸ” æŸ¥è©¢æ—¥æœŸç¯„åœ: 2025-08-18 åˆ° 2025-08-24
ğŸ“Š ä½¿ç”¨ 12 å€‹æ—¥æœŸæŸ¥è©¢æ¢ä»¶
ğŸ“Š æŸ¥è©¢çµæœçµ±è¨ˆ: ç¸½å…± 50 ç­†ï¼Œç¯„åœå…§ 48 ç­†
âš ï¸ éæ¿¾æ‰ç¯„åœå¤–çš„è³‡æ–™: 2330 - 114/08/17
```

### 4. **é©—è­‰æ—¥æœŸç¯„åœ**
```
ç¢ºèªæŸ¥è©¢çµæœä¸­çš„æ‰€æœ‰æ—¥æœŸéƒ½åœ¨:
æœ¬é€±ä¸€ ~ ä»Šå¤© çš„ç¯„åœå…§
```

## ğŸ‰ ä¿®å¾©å®Œæˆ

### å•é¡Œè§£æ±º
- âœ… **æœ¬é€±è¨ˆç®—éŒ¯èª¤** â†’ æ­£ç¢ºçš„é€±ä¸€é–‹å§‹è¨ˆç®—
- âœ… **åŒ…å«éæœ¬é€±è³‡æ–™** â†’ äºŒæ¬¡é©—è­‰éæ¿¾
- âœ… **ç¼ºä¹èª¿è©¦è³‡è¨Š** â†’ è©³ç´°çš„æŸ¥è©¢æ—¥èªŒ

### æŠ€è¡“æ”¹é€²
- âœ… ä¿®å¾©æœ¬é€±æ—¥æœŸè¨ˆç®—é‚è¼¯
- âœ… å¢åŠ æ—¥æœŸç¯„åœé©—è­‰æ©Ÿåˆ¶
- âœ… æä¾›è©³ç´°çš„èª¿è©¦è³‡è¨Š
- âœ… è‡ªå‹•éæ¿¾ç¯„åœå¤–è³‡æ–™

ç¾åœ¨ Web æŸ¥è©¢æœ¬é€±åŠŸèƒ½å·²ç¶“å®Œå…¨ä¿®å¾©ï¼Œç¢ºä¿åªè¿”å›çœŸæ­£å±¬æ–¼æœ¬é€±çš„è¨Šæ¯ï¼ğŸŠ
