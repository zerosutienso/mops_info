# 台灣證交所重大訊息 Web 查看器使用說明

## 🎯 概述

這是一個基於 Rust + MongoDB 的 Web 應用程式，提供美觀的網頁介面來查看和分析台灣證交所重大訊息資料。

## ✨ 功能特色

### 🌐 Web 介面
- **響應式設計**: 支援桌面和行動裝置
- **Bootstrap 5**: 現代化的 UI 設計
- **Font Awesome**: 豐富的圖示系統
- **即時搜尋**: 支援公司、日期、關鍵字篩選

### 📊 資料展示
- **列表檢視**: 分頁顯示所有重大訊息
- **詳細檢視**: 完整的公告詳細內容
- **統計分析**: 圖表化的資料分析
- **API 介面**: RESTful API 支援

### 🔍 查詢功能
- **公司篩選**: 按公司代號篩選
- **日期篩選**: 按查詢日期篩選
- **關鍵字搜尋**: 在標題中搜尋關鍵字
- **分頁瀏覽**: 支援大量資料的分頁顯示

## 🚀 快速開始

### 前置需求
1. **MongoDB 已安裝並運行**
2. **已有重大訊息資料** (使用 CLI 工具收集)

### 方法 1: 使用啟動腳本 (推薦)
```bash
# 執行自動化啟動腳本
.\start_web_viewer.bat
```

腳本會自動：
- 檢查 MongoDB 連接
- 檢查資料庫資料
- 編譯 Web 服務器
- 啟動服務

### 方法 2: 手動啟動
```bash
# 1. 確保有資料
cargo run -- --date 2025-08-15 --save-mongodb

# 2. 編譯 Web 服務器
cargo build --bin web_server --release

# 3. 啟動服務器
cargo run --bin web_server --release
```

### 方法 3: 自訂參數啟動
```bash
# 自訂 MongoDB 設定
cargo run --bin web_server -- \
  --mongodb-uri "mongodb://localhost:27017" \
  --mongodb-database "twse_db" \
  --mongodb-collection "announcements" \
  --host "0.0.0.0" \
  --port "8080"
```

## 🌐 Web 介面說明

### 主頁面 (/)
- **搜尋區域**: 公司、日期、關鍵字篩選
- **統計卡片**: 總公告數、公司數、日期數
- **公告列表**: 分頁顯示重大訊息
- **操作按鈕**: 查看詳細、篩選等

### 詳細頁面 (/detail/:id)
- **基本資訊**: 公司、日期、時間等
- **詳細內容**: 完整的公告詳細內容
- **操作功能**: 複製內容、相關查詢等

### 統計頁面 (/stats)
- **總覽統計**: 總數據概覽
- **圖表分析**: 公司排行榜、日期趨勢
- **詳細表格**: 可排序的統計表格

### API 介面 (/api/announcements)
- **JSON 格式**: 結構化資料輸出
- **查詢參數**: 支援 company、date、limit 參數
- **程式整合**: 便於其他系統整合

## 📊 使用範例

### 基本查詢
1. **查看所有公告**: 直接開啟主頁
2. **篩選特定公司**: 選擇公司代號下拉選單
3. **篩選特定日期**: 選擇日期下拉選單
4. **關鍵字搜尋**: 在搜尋框輸入關鍵字

### 進階操作
1. **查看詳細內容**: 點擊公告標題或「查看詳細」按鈕
2. **複製公告內容**: 在詳細頁面點擊「複製內容」
3. **查看統計分析**: 點擊導航列的「統計分析」
4. **API 查詢**: 訪問 `/api/announcements?company=2330`

## 🔧 設定參數

### 命令列參數
- `--mongodb-uri`: MongoDB 連接字串 (預設: mongodb://localhost:27017)
- `--mongodb-database`: 資料庫名稱 (預設: twse_db)
- `--mongodb-collection`: 集合名稱 (預設: announcements)
- `--host`: 監聽位址 (預設: 127.0.0.1)
- `--port`: 監聽埠號 (預設: 3000)

### 環境變數 (可選)
```bash
export MONGODB_URI="mongodb://localhost:27017"
export MONGODB_DATABASE="twse_db"
export MONGODB_COLLECTION="announcements"
```

## 🌍 網路存取

### 本機存取 (預設)
```
http://127.0.0.1:3000
```

### 區域網路存取
```bash
# 啟動時指定 host 為 0.0.0.0
cargo run --bin web_server -- --host "0.0.0.0" --port "3000"

# 然後可從區域網路存取
http://[你的IP]:3000
```

### 生產環境部署
```bash
# 使用 release 模式
cargo build --bin web_server --release

# 啟動服務
./target/release/web_server --host "0.0.0.0" --port "80"
```

## 📱 響應式設計

### 桌面版
- 完整的功能和佈局
- 多欄位顯示
- 豐富的互動元素

### 平板版
- 適應中等螢幕尺寸
- 調整欄位佈局
- 保持主要功能

### 手機版
- 單欄顯示
- 簡化操作介面
- 觸控友善設計

## 🛠️ 故障排除

### 常見問題

#### 1. 無法啟動服務器
```
Error: 無法連接到 MongoDB
```
**解決方法**:
- 確認 MongoDB 服務正在運行
- 檢查連接字串是否正確
- 使用 `mongosh` 測試連接

#### 2. 沒有資料顯示
```
沒有找到符合條件的重大訊息
```
**解決方法**:
- 先使用 CLI 工具收集資料
- 確認資料庫和集合名稱正確
- 檢查資料是否成功儲存

#### 3. 埠號被占用
```
Error: Address already in use
```
**解決方法**:
- 更改埠號: `--port 8080`
- 或停止占用埠號的程序

#### 4. 編譯錯誤
```
Error: failed to compile
```
**解決方法**:
- 確認 Rust 版本 >= 1.70
- 執行 `cargo clean` 清理快取
- 檢查依賴套件版本

## 🎯 效能優化

### 資料庫優化
- MongoDB 索引已自動建立
- 使用分頁減少記憶體使用
- 限制 API 查詢數量

### 前端優化
- 使用 CDN 載入 CSS/JS
- 響應式圖片載入
- 最小化 DOM 操作

### 服務器優化
- 使用 release 模式編譯
- 適當的連接池設定
- 快取常用查詢結果

## 🔮 未來功能

### 短期計畫
- [ ] 即時資料更新
- [ ] 更多圖表類型
- [ ] 匯出功能 (PDF, Excel)
- [ ] 使用者偏好設定

### 長期計畫
- [ ] 使用者認證系統
- [ ] 自訂儀表板
- [ ] 即時通知功能
- [ ] 行動應用程式

## 🎉 總結

這個 Web 查看器提供了：

1. **🌐 現代化介面**: 美觀、響應式的 Web 介面
2. **📊 豐富功能**: 查詢、篩選、統計、API 等完整功能
3. **🚀 高效能**: 基於 Rust 的高效能 Web 服務器
4. **📱 跨平台**: 支援各種裝置和瀏覽器
5. **🔧 易於使用**: 簡單的安裝和使用流程

現在你可以透過美觀的 Web 介面來查看和分析台灣證交所的重大訊息資料了！🎊

## 📞 技術支援

如果遇到問題：
1. 檢查 MongoDB 連接和資料
2. 查看控制台錯誤訊息
3. 確認防火牆和網路設定
4. 參考相關技術文件
